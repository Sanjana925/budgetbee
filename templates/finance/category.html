{% extends 'finance/base.html' %}
{% load static %}

{% block title %}Category - Budget Bee{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/category.css' %}">
{% endblock %}

{% block content %}
<div class="category-container">

    <!-- HEADER: Toggle + Add -->
    <div class="category-header">

        <!-- Toggle Buttons -->
        <div class="toggle">
            <a href="?type=expense" class="toggle-btn {% if category_type == 'expense' %}active{% endif %}">Expense</a>
            <a href="?type=income" class="toggle-btn {% if category_type == 'income' %}active{% endif %}">Income</a>
        </div>

        <!-- Add Category Button -->
        {% if request.user.is_authenticated %}
            <a href="{% url 'finance:add-category' %}" class="add-btn">+</a>
        {% else %}
            <button class="add-btn guest-add" data-type="category">+</button>
        {% endif %}

    </div>

    <!-- CATEGORY LIST -->
    <div class="category-list">
        {% if categories %}
            {% for cat in categories %}
            <div class="category-item" style="--cat-color: {{ cat.color }}">
                <div class="left">
                    <span class="icon">{{ cat.icon }}</span>
                    <span class="name">{{ cat.name }}</span>
                </div>
                <div class="right">
                    {% if request.user.is_authenticated %}
                        <a href="{% url 'finance:edit-category' cat.id %}">âœï¸</a>
                        <a href="{% url 'finance:delete-category' cat.id %}">ğŸ—‘ï¸</a>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        {% else %}
            <!-- Default categories for guest -->
            <div class="category-item" style="--cat-color:#FF6384">
                <div class="left"><span class="icon">ğŸ”</span> <span class="name">Food</span></div>
            </div>
            <div class="category-item" style="--cat-color:#36A2EB">
                <div class="left"><span class="icon">ğŸ’µ</span> <span class="name">Salary</span></div>
            </div>
            <p class="empty-text">No more categories</p>
        {% endif %}
    </div>

</div>
{% endblock %}
